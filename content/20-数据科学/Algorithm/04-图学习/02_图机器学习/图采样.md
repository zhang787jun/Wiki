---
title: "图采样"
layout: page
date: 2099-06-02 00:00
---
[TOC]

# 1. 图采样

图采样是子图采样，不是随机采样

通过对现有 GNN 模型的调研，我们抽象出三种不同的采样器，即遍历、邻域、负采样。
1. 遍历（TRAVERSE）：用于从整个分区图中，采样一批顶点或边。
2. 邻域（NEIGHBORHOOD）：将生成顶点的上下文。该顶点的上下文可以是一个或多个 hop 邻居，用于对该顶点进行编码。
3. 负采样（NEGATIV）：用于生成负样本以加速训练过程的收敛。

## 1.1. 遍历

## 1.2. 邻域


### 1.2.1. GraphSAGE
SAGE（SAmple& aggreGatE）
参考资料：http://snap.stanford.edu/graphsage/
基本步骤：
1. 邻居采样
    1阶采样、2阶采样、...
    由顶向外
2. 邻居聚会
   由外向内，消息传递
3. 节点预测

#### 1.2.1.1. 特点
**优点**
1. 减少计算量
2. 允许泛化到其他关系

### 1.2.2. PingSAGE
采样时只能选取真实的邻居节点吗
通过多次随机游走，按游走经过的频率选取邻居


## 1.3. 负采样
负采样就是给定源节点，返回和它不相连的目标节点。负采样同时支持本地和全局负采样，对于一个batch的样本要采样其负样本时，可以按照一定的概率分布选择一个server，然后在该server上采样。如果选择本地负采样，则只在本机进行负采样。目前built-in的负采样算子包括以下几种：
• random：随机采样和给定源节点不相连的目的节点。
• in_degree：按照目的节点的入度分布，返回与源节点不相连的目的节点。

按照入度分布的in_degree负采样实现上采用AliasMethod[5]，会在首次采样前提前构建好Alias Table，因此采样是常数时间复杂度。此外负采样我们默认是严格负采样，但是出于性能和极端情形的考虑，我们支持用户端设置一个阈值来控制严格程度。负采样可能对算法效果也会产生很大影响，因此负采样算子如何和图划分结合，如何高效负采样，以及按何种分布负采样都是值得探索和研究的地方。
# 2. 邻居聚合
## 2.1. 评估聚合表达能力的
评估聚合表达能力的指标单射(一对一映射)
## 2.2. 常见

### 2.2.1. Mean
### 2.2.2. Max
### 2.2.3. Sum

## 2.3. GIN
基于单射的Graph Isomorphism Net (GIN)模型