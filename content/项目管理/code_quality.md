---
title: "代码质量及工程化"
layout: page
date: 2099-06-02 00:00
---
[TOC]
# 高质量的代码


## 1. 代码规范性
### 1.1 变量/函数命名格式规范
* Java
驼峰命名：多个单词组成一个名称时，第一个单词全部小写，后面单词首字母大写；如：
```Java
public void setUserName(String userName)
```
* C/C++/C#
帕斯卡命名：多个单词组成一个名称时，每个单词的首字母大写；

```c++
public void SetUserName(String userName)
```
* python
类 首字符大写其他全部小写
```python
class Car(object):
    def __init(self):
        return 
    def run(self)
```

### 1.2 变量/函数命名语义明确

名词合理、动词到位
#### 1. 动词到位
一些比较有表达力的单词：

| 单词  | 可替代单词                                         |
| :---: | -------------------------------------------------- |
| send  | deliver、dispatch、announce、distribute、route     |
| find  | search、extract、locate、recover                   |
| start | launch、create、begin、open                        |
| make  | create、set up、build、generate、compose、add、new |

布尔相关的命名加上 is、can、should、has 等前缀。

#### 2. 名词合理

使用 i、j、k 作为循环迭代器的名字过于简单，user_i、member_i 这种名字会更有表达力。因为循环层次越多，代码越难理解，有表达力的迭代器名字可读性会更高。

为名字添加形容词等信息能让名字更具有表达力，但是名字也会变长。名字长短的准则是：作用域越大，名字越长。因此只有在短作用域才能使用一些简单名字。


起完名字要思考一下别人会对这个名字有何解读，会不会误解了原本想表达的含义。
#### 3. 标记准确

- 用 min、max 表示数量范围；
- 用 first、last 表示访问空间的包含范围；
```python
a=[1,2,3,4,5]
a[0] # first =0
a[4] # last =4
```
- begin、end 表示访问空间的排除范围，即 end 不包含尾部。begin==first,end=last+1
```python
a=[1,2,3,4,5]
a[0] # begin =0
a[4] # end =5  
```



### 1.3 良好的可读性

#### 1.3.1 注释

尽量简洁明了：

用 TODO 等做标记：

| 标记  | 用法                   |
| ----- | ---------------------- |
| TODO  | 待做                   |
| FIXME | 待修复                 |
| HACK  | 粗糙的解决方案         |
| XXX   | 危险！这里有重要的问题 |


#### 2.一次只做一件事

只做一件事的代码很容易让人知道其要做的事；

基本流程：列出代码所做的所有任务；把每个任务拆分到不同的函数，或者不同的段落。

#### 3. 用自然语言表述代码

先用自然语言书写代码逻辑，也就是伪代码，然后再写代码，这样代码逻辑会更清晰。

#### 4. 减少代码量

不要过度设计，编码过程会有很多变化，过度设计的内容到最后往往是无用的。

多用标准库实现。

## 2. 代码完整性

### 2.1 核心功能完整
### 2.2 边界测试通过
1. 考虑边界问题
2. 循环、递归边界
3. 输入输出边界
### 2.3 负面测试
1. 可能的错误输入
## 3. 代码鲁棒性
考虑负面输入
