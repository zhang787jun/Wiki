<!DOCTYPE HTML>
<html>

<head>
    <link rel="Stylesheet" type="text/css" href="/Wiki/static/css/style.css">
    <link rel="Stylesheet" type="text/css" href="/Wiki/static/css/tango.css">
    <link rel="shortcut icon" href="/Wiki/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/Wiki/favicon.ico" type="image/x-icon">
    <title>[测试]Tensorflow异常集锦 - Jun's personal knowledge wiki</title>
    <meta name="keywords" content="Technology, MachineLearning, DataMining, Wiki" />
    <meta name="description" content="A wiki website" />
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <script type="text/javascript" async
        src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML">
    </script>
    <script type="text/javascript" async src="https://cdn.bootcss.com/mathjax-mhchem/3.3.2/mhchem.js">
    </script>

</head>

<body>
    <div id="container">
        
<div id="header">
  <div id="post-nav"><a href="/Wiki/">Home</a>&nbsp;»&nbsp;<a href="/Wiki/#Data_Scince\Library_Platform\Tensorflow">Data_Scince\Library_Platform\Tensorflow</a>&nbsp;»&nbsp;[测试]Tensorflow异常集锦</div>
</div>
<div class="clearfix"></div>
<div id="title">[测试]Tensorflow异常集锦</div>
<div id="content">
  <h1 id="tensorflow">Tensorflow异常集锦</h1>
<h2 id="1-tensorflow-checkpoint">1. tensorflow checkpoint报错</h2>
<p>在调用tf.train.Saver#save时，如果使用的路径是绝对路径，那么保存的checkpoint里面用的就是绝对路径；如果使用的是相对路径，那么保存的checkpoint里面用的就是相对路径。正确的方法应该是使用相对路径进行保存，这样才能保证较好的可移植性。<br />
如果使用相对路径，复制到本地之后，会报找不到文件的错误。<br />
tensorflow.python.framework.errors_impl.NotFoundError: FindFirstFile failed for: <br />
一个绝对路径...... : ϵͳ\udcd5Ҳ\udcbb\udcb5\udcbdָ\udcb6\udca8\udcb5\udcc4·\udcbe\udcb6\udca1\udca3<br />
; No such process</p>
<p><strong>解决方法：</strong><br />
1. 手动修改checkpoint文件，checkpoint文件是一个文本文件。<br />
2. 注意路径的斜杠"\"，特别是windows 平台下,部分需要双饭斜杠 “\”、</p>
<h2 id="_1"></h2>
<p>以上结论可以通过以下代码进行验证。</p>
<p>用以下代码，加载图模型的时候会报错</p>
<div class="hlcode"><pre><span class="c">#保存图模型</span>
<span class="n">tf</span><span class="o">.</span><span class="n">train</span><span class="o">.</span><span class="n">write_graph</span><span class="p">(</span><span class="n">sess</span><span class="o">.</span><span class="n">graph_def</span><span class="p">,</span> <span class="n">graph_dir</span><span class="p">,</span> <span class="s">&#39;graph.pbtxt&#39;</span><span class="p">,</span><span class="n">as_text</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="c"># 注意 as_text=True</span>

<span class="c">#加载图模型</span>
<span class="k">with</span> <span class="n">tf</span><span class="o">.</span><span class="n">gfile</span><span class="o">.</span><span class="n">FastGFile</span><span class="p">(</span><span class="s">&quot;modle_graph/graph.pbtxt&quot;</span><span class="p">,</span><span class="s">&quot;rb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">graph_def</span> <span class="o">=</span> <span class="n">tf</span><span class="o">.</span><span class="n">GraphDef</span><span class="p">()</span>
    <span class="n">graph_def</span><span class="o">.</span><span class="n">ParseFromString</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>


<span class="o">&gt;&gt;&gt;</span> 
<span class="n">google</span><span class="o">.</span><span class="n">protobuf</span><span class="o">.</span><span class="n">message</span><span class="o">.</span><span class="n">DecodeError</span><span class="p">:</span> <span class="n">Error</span> <span class="n">parsing</span> <span class="n">message</span>
</pre></div>


<p><strong>解决:</strong></p>
<div class="hlcode"><pre><span class="n">tf</span><span class="o">.</span><span class="n">train</span><span class="o">.</span><span class="n">write_graph</span><span class="p">(</span><span class="n">sess</span><span class="o">.</span><span class="n">graph_def</span><span class="p">,</span> <span class="n">graph_dir</span><span class="p">,</span> <span class="s">&#39;graph.pbtxt&#39;</span><span class="p">,</span><span class="n">as_text</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
</pre></div>


<h1 id="typeerror-cannot-interpret-feed_dict-key-as-tensor-can-not-convert-a-int-into-a-tensor">TypeError: Cannot interpret feed_dict key as Tensor: Can not convert a int into a Tensor</h1>
<p>解释：你的占位符中传入的已经是tensor了，没必要feed_dict,<br />
可以直接sess.run， 如果你非要feed__dict的话，可以参考</p>
<p>ph=tf.placeholder（......）<br />
ph_tensor=sess.run(tensor)<br />
sess.run([......],feed_dict{ph:ph_tensor})</p>
</div>
<div id="re">
  如果你觉得这篇文章对你有帮助，不妨请我喝杯咖啡，鼓励我创造更多
</div>>


        /Wiki
        /Wiki
        /Wiki
    </div>
    <div id="footer">
        <span>
            Copyright © 2019 zhang787jun.
            Powered by <a href="http://simiki.org/" target="_blank">Simiki</a>.
        </span>
    </div>
    
</body>

</html>