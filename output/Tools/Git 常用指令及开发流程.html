<!DOCTYPE HTML>
<html>
    <head>
        <link rel="Stylesheet" type="text/css" href="/Wiki/static/css/style.css">
        <link rel="Stylesheet" type="text/css" href="/Wiki/static/css/tango.css">
        <link rel="shortcut icon" href="/Wiki/favicon.ico" type="image/x-icon">
        <link rel="icon" href="/Wiki/favicon.ico" type="image/x-icon">
        <title>Git 常用指令及开发流程 - Jun's personal knowledge wiki</title>
        <meta name="keywords" content="Technology, MachineLearning, DataMining, Wiki"/>
        <meta name="description" content="A wiki website"/>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body>
        <div id="container">
            
<div id="header">
  <div id="post-nav"><a href="/Wiki/">Home</a>&nbsp;»&nbsp;<a href="/Wiki/#Tools">Tools</a>&nbsp;»&nbsp;Git 常用指令及开发流程</div>
</div>
<div class="clearfix"></div>
<div id="title">Git 常用指令及开发流程</div>
  <div id="content">
  <div class="toc"><span class="toctitle">Table of Contents</span><ul>
<li><a href="#git">git常用指令</a><ul>
<li><a href="#_1">新建，初始化代码库</a></li>
<li><a href="#_2">仓库内文件管理</a><ul>
<li><a href="#_3">增加/删除文件到暂存区</a></li>
<li><a href="#_4">忽略文件</a></li>
<li><a href="#_5">代码提交</a></li>
</ul>
</li>
<li><a href="#_6">分支管理</a><ul>
<li><a href="#_7">查看</a></li>
<li><a href="#_8">创建</a></li>
<li><a href="#_9">切换分支</a></li>
<li><a href="#_10">合并分支</a></li>
<li><a href="#_11">文件覆盖</a></li>
<li><a href="#_12">删除</a></li>
</ul>
</li>
<li><a href="#_13">信息查看</a><ul>
<li><a href="#log">log管理</a><ul>
<li><a href="#1-log">1. 清空 log</a></li>
</ul>
</li>
<li><a href="#log_1">优雅的查看log</a></li>
</ul>
</li>
<li><a href="#_14">远程同步</a></li>
<li><a href="#_15">版本退回</a></li>
</ul>
</li>
<li><a href="#git_1">git 开发模式</a><ul>
<li><a href="#github-flow">GitHub Flow——以部署为中心的开发模式</a></li>
<li><a href="#git-flow">Git Flow——以开发为中心的开发模式</a><ul>
<li><a href="#_16">专栏：版本号的分配规则</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<h1 id="git">git常用指令</h1>
<p>参考资料<br />
https://learngitbranching.js.org/<br />
https://git-scm.com/book/zh/v2<br />
《GitHub入门与实践》</p>
<p><img src="./images/Git_V2.16.2.png" ></p>
<h2 id="_1">新建，初始化代码库</h2>
<div class="hlcode"><pre><span class="cp"># 在当前目录新建一个Git代码库</span>
<span class="n">git</span> <span class="n">init</span>

<span class="cp"># 新建一个目录，将其初始化为Git代码库</span>
<span class="n">git</span> <span class="n">init</span> <span class="p">[</span><span class="n">project</span><span class="o">-</span><span class="n">name</span><span class="p">]</span>

<span class="cp"># 下载一个项目和它的整个代码历史</span>
<span class="n">git</span> <span class="n">clone</span> <span class="p">[</span><span class="n">url</span><span class="p">]</span>
</pre></div>


<h2 id="_2">仓库内文件管理</h2>
<h3 id="_3">增加/删除文件到暂存区</h3>
<div class="hlcode"><pre><span class="cp"># 添加指定文件到暂存区</span>
<span class="n">git</span> <span class="n">add</span> <span class="p">[</span><span class="n">file1</span><span class="p">]</span> <span class="p">[</span><span class="n">file2</span><span class="p">]</span> <span class="p">...</span>

<span class="cp"># 添加指定目录到暂存区，包括子目录</span>
<span class="n">git</span> <span class="n">add</span> <span class="p">[</span><span class="n">dir</span><span class="p">]</span>

<span class="cp"># 添加当前目录的所有文件到暂存区</span>
<span class="n">git</span> <span class="n">add</span> <span class="p">.</span>

<span class="cp"># 添加每个变化前，都会要求确认</span>
<span class="cp"># 对于同一个文件的多处变化，可以实现分次提交</span>
<span class="n">git</span> <span class="n">add</span> <span class="o">-</span><span class="n">p</span>

<span class="cp"># 删除工作区文件，并且将这次删除放入暂存区</span>
<span class="n">git</span> <span class="n">rm</span> <span class="p">[</span><span class="n">file1</span><span class="p">]</span> <span class="p">[</span><span class="n">file2</span><span class="p">]</span> <span class="p">...</span>

<span class="cp"># 停止追踪指定文件，但该文件会保留在工作区</span>
<span class="n">git</span> <span class="n">rm</span> <span class="o">--</span><span class="n">cached</span> <span class="p">[</span><span class="n">file</span><span class="p">]</span>

<span class="cp"># 改名文件，并且将这个改名放入暂存区</span>
<span class="n">git</span> <span class="n">mv</span> <span class="p">[</span><span class="n">file</span><span class="o">-</span><span class="n">original</span><span class="p">]</span> <span class="p">[</span><span class="n">file</span><span class="o">-</span><span class="n">renamed</span><span class="p">]</span>
</pre></div>


<h3 id="_4">忽略文件</h3>
<p>在仓库内添加<code>.gitignore</code> 文件</p>
<div class="hlcode"><pre><span class="n">vim</span> <span class="p">.</span><span class="n">gitignore</span>
</pre></div>


<p><code>.gitignore</code> 文件语法：</p>
<div class="hlcode"><pre><span class="cp"># 忽略 以sh结尾的文件</span>
<span class="o">*</span><span class="p">.</span><span class="n">sh</span>
<span class="cp">#以txt结尾的文件不能忽略</span>
<span class="o">!*</span><span class="p">.</span><span class="n">txt</span>
<span class="cp">#setting 文件下的所有文件忽略</span>
<span class="p">.</span><span class="n">setting</span><span class="o">/</span>
<span class="cp">#a文件夹下的所有txt文件忽略</span>
<span class="o">/</span><span class="n">a</span><span class="o">/*</span><span class="p">.</span><span class="n">txt</span>
</pre></div>


<p>在线配置<code>.gitignore</code>文件: https://www.gitignore.io/</p>
<h3 id="_5">代码提交</h3>
<div class="hlcode"><pre><span class="cp"># 提交暂存区到仓库区</span>
<span class="n">git</span> <span class="n">commit</span> <span class="o">-</span><span class="n">m</span> <span class="p">[</span><span class="n">message</span><span class="p">]</span>

<span class="cp"># 提交暂存区的指定文件到仓库区</span>
<span class="n">git</span> <span class="n">commit</span> <span class="p">[</span><span class="n">file1</span><span class="p">]</span> <span class="p">[</span><span class="n">file2</span><span class="p">]</span> <span class="p">...</span> <span class="o">-</span><span class="n">m</span> <span class="p">[</span><span class="n">message</span><span class="p">]</span>

<span class="cp"># 提交工作区自上次commit之后的变化，直接到仓库区</span>
<span class="n">git</span> <span class="n">commit</span> <span class="o">-</span><span class="n">a</span>

<span class="cp"># 提交时显示所有diff信息</span>
<span class="n">git</span> <span class="n">commit</span> <span class="o">-</span><span class="n">v</span>

<span class="cp"># 使用一次新的commit，替代上一次提交</span>
<span class="cp"># 如果代码没有任何新变化，则用来改写上一次commit的提交信息</span>
<span class="n">git</span> <span class="n">commit</span> <span class="o">--</span><span class="n">amend</span> <span class="o">-</span><span class="n">m</span> <span class="p">[</span><span class="n">message</span><span class="p">]</span>

<span class="cp"># 重做上一次commit，并包括指定文件的新变化</span>
<span class="n">git</span> <span class="n">commit</span> <span class="o">--</span><span class="n">amend</span> <span class="p">[</span><span class="n">file1</span><span class="p">]</span> <span class="p">[</span><span class="n">file2</span><span class="p">]</span> <span class="p">...</span>
</pre></div>


<h2 id="_6">分支管理</h2>
<h3 id="_7">查看</h3>
<div class="hlcode"><pre><span class="cp"># 列出所有本地分支</span>
<span class="n">git</span> <span class="n">branch</span>

<span class="cp"># 列出所有远程分支</span>
<span class="n">git</span> <span class="n">branch</span> <span class="o">-</span><span class="n">r</span>

<span class="cp"># 列出所有本地分支和远程分支</span>
<span class="n">git</span> <span class="n">branch</span> <span class="o">-</span><span class="n">a</span>
</pre></div>


<h3 id="_8">创建</h3>
<div class="hlcode"><pre><span class="cp"># 新建一个分支，但依然停留在当前分支</span>
<span class="n">git</span> <span class="n">branch</span> <span class="p">[</span><span class="n">branch</span><span class="o">-</span><span class="n">name</span><span class="p">]</span>

<span class="cp"># 新建一个分支，并切换到该分支</span>
<span class="n">git</span> <span class="n">checkout</span> <span class="o">-</span><span class="n">b</span> <span class="p">[</span><span class="n">branch</span><span class="o">-</span><span class="n">name</span><span class="p">]</span>

<span class="cp"># 新建一个分支，指向指定commit</span>
<span class="n">git</span> <span class="n">branch</span> <span class="p">[</span><span class="n">branch</span><span class="o">-</span><span class="n">name</span><span class="p">]</span> <span class="p">[</span><span class="n">commit</span><span class="p">]</span>

<span class="cp"># 创建一个完全独立没有log的分支</span>
<span class="n">git</span> <span class="n">checkout</span> <span class="o">--</span><span class="n">orphan</span>  <span class="p">[</span><span class="n">branch</span><span class="o">-</span><span class="n">name</span><span class="p">]</span>

<span class="cp"># 新建一个分支，与指定的远程分支建立追踪关系</span>
<span class="n">git</span> <span class="n">branch</span> <span class="o">--</span><span class="n">track</span> <span class="p">[</span><span class="n">branch</span><span class="o">-</span><span class="n">name</span><span class="p">]</span> <span class="p">[</span><span class="n">remote</span><span class="o">-</span><span class="n">branch</span><span class="p">]</span>
</pre></div>


<h3 id="_9">切换分支</h3>
<div class="hlcode"><pre><span class="cp"># 切换到指定分支，并更新工作区</span>
<span class="n">git</span> <span class="n">checkout</span> <span class="p">[</span><span class="n">branch</span><span class="o">-</span><span class="n">name</span><span class="p">]</span>

<span class="cp"># 切换到上一个分支</span>
<span class="n">git</span> <span class="n">checkout</span> <span class="o">-</span>
</pre></div>


<h3 id="_10">合并分支</h3>
<div class="hlcode"><pre><span class="cp"># 建立追踪关系，在现有分支与指定的远程分支之间</span>
<span class="n">git</span> <span class="n">branch</span> <span class="o">--</span><span class="n">set</span><span class="o">-</span><span class="n">upstream</span> <span class="p">[</span><span class="n">branch</span><span class="o">-</span><span class="n">name</span><span class="p">]</span> <span class="p">[</span><span class="n">remote</span><span class="o">-</span><span class="n">branch</span><span class="p">]</span>

<span class="cp"># 合并指定分支到当前分支</span>
<span class="n">git</span> <span class="n">merge</span> <span class="p">[</span><span class="n">branch</span><span class="o">-</span><span class="n">name</span><span class="p">]</span>



<span class="cp"># 选择一个commit，合并进当前分支</span>
<span class="n">git</span> <span class="n">cherry</span><span class="o">-</span><span class="n">pick</span> <span class="p">[</span><span class="n">commit</span><span class="p">]</span>

<span class="n">git</span> <span class="n">rebase</span>
<span class="err">小结</span>

    <span class="n">rebase</span> <span class="err">操作可以把本地未</span><span class="n">push</span><span class="err">的分叉提交历史整理成直线；</span>

    <span class="n">rebase</span><span class="err">的目的是使得我们在查看历史提交的变化时更容易，因为分叉的提交需要三方对比。</span>
</pre></div>


<h3 id="_11">文件覆盖</h3>
<div class="hlcode"><pre><span class="nx">git</span> <span class="nx">checkout</span> <span class="p">(</span><span class="na">-p</span><span class="o">|--</span><span class="nx">patch</span><span class="p">)</span> <span class="err">[</span><span class="o">&lt;</span><span class="nx">tree</span><span class="na">-ish</span><span class="o">&gt;</span><span class="cp">]</span> <span class="cp">[</span><span class="o">--</span><span class="cp">]</span> <span class="cp">[</span><span class="o">&lt;</span><span class="nx">paths</span><span class="o">&gt;</span><span class="err">…​</span><span class="cp">]</span>

git checkout branch_2
git checkout branch_1 file_1

将工作区的 <span class="nt">&lt;paths&gt;</span> 覆盖成索引指向的内容。
当可选项<span class="cp">[</span><span class="o">&lt;</span><span class="nx">tree</span> <span class="nx">ish</span><span class="o">&gt;</span><span class="cp">]</span>给出的时候，符合 <span class="nt">&lt;paths&gt;</span>的路径将在索引上和工作区更新

由于上次合并失败，索引可能包含未合并的条目。默认情况下，如果尝试从索引中签出这样的条目，签出操作将失败，并且不会签出任何内容。使用-f将忽略这些未合并的条目。合并的特定方面的内容可以通过使用--ours或--their从索引中签出。使用-m，可以放弃对工作树文件所做的更改，以重新创建原始的冲突合并结果。
</pre></div>


<h3 id="_12">删除</h3>
<div class="hlcode"><pre><span class="err">#</span> <span class="nx">删除分支</span>
<span class="nx">git</span> <span class="nx">branch</span> <span class="na">-d</span> <span class="err">[</span><span class="nx">branch</span><span class="na">-name</span><span class="cp">]</span>
git branch -D <span class="cp">[</span><span class="nx">branch</span><span class="na">-name</span><span class="cp">]</span> # 强制删除

# 删除远程分支
git push origin --delete <span class="cp">[</span><span class="nx">branch</span><span class="na">-name</span><span class="cp">]</span>
git branch -dr <span class="cp">[</span><span class="nx">remote</span><span class="p">/</span><span class="nx">branch</span><span class="cp">]</span>

#不同分支中的 部分文件的合并
# 1. 切换到需要合并的分支
git checkout <span class="cp">[</span><span class="nx">branch</span><span class="na">-name</span><span class="o">-</span><span class="mi">2</span><span class="cp">]</span>
# 2. checkout修改的文件
git checkout <span class="cp">[</span><span class="nx">branch</span><span class="na">-name</span><span class="o">-</span><span class="mi">1</span><span class="cp">]</span>  <span class="nt">&lt;dir</span><span class="na">_paths</span><span class="nt">&gt;</span>

# <span class="nt">&lt;paths&gt;</span>: config/,xxx.php
</pre></div>


<h2 id="_13">信息查看</h2>
<div class="hlcode"><pre><span class="cp"># 显示有变更的文件</span>
<span class="n">git</span> <span class="n">status</span>

<span class="cp"># 显示当前分支的版本历史</span>
<span class="n">git</span> <span class="n">log</span>

<span class="cp"># 显示commit历史，以及每次commit发生变更的文件</span>
<span class="n">git</span> <span class="n">log</span> <span class="o">--</span><span class="n">stat</span>

<span class="cp"># 搜索提交历史，根据关键词</span>
<span class="n">git</span> <span class="n">log</span> <span class="o">-</span><span class="n">S</span> <span class="p">[</span><span class="n">keyword</span><span class="p">]</span>

<span class="cp"># 显示某个commit之后的所有变动，每个commit占据一行</span>
<span class="n">git</span> <span class="n">log</span> <span class="p">[</span><span class="n">tag</span><span class="p">]</span> <span class="n">HEAD</span> <span class="o">--</span><span class="n">pretty</span><span class="o">=</span><span class="n">format</span><span class="o">:%</span><span class="n">s</span>

<span class="cp"># 显示某个commit之后的所有变动，其&quot;提交说明&quot;必须符合搜索条件</span>
<span class="n">git</span> <span class="n">log</span> <span class="p">[</span><span class="n">tag</span><span class="p">]</span> <span class="n">HEAD</span> <span class="o">--</span><span class="n">grep</span> <span class="n">feature</span>

<span class="cp"># 显示某个文件的版本历史，包括文件改名</span>
<span class="n">git</span> <span class="n">log</span> <span class="o">--</span><span class="n">follow</span> <span class="p">[</span><span class="n">file</span><span class="p">]</span>
<span class="n">git</span> <span class="n">whatchanged</span> <span class="p">[</span><span class="n">file</span><span class="p">]</span>

<span class="cp"># 显示指定文件相关的每一次diff</span>
<span class="n">git</span> <span class="n">log</span> <span class="o">-</span><span class="n">p</span> <span class="p">[</span><span class="n">file</span><span class="p">]</span>

<span class="cp"># 显示过去5次提交</span>
<span class="n">git</span> <span class="n">log</span> <span class="o">-</span><span class="mi">5</span> <span class="o">--</span><span class="n">pretty</span> <span class="o">--</span><span class="n">oneline</span>

<span class="cp"># 显示所有提交过的用户，按提交次数排序</span>
<span class="n">git</span> <span class="n">shortlog</span> <span class="o">-</span><span class="n">sn</span>

<span class="cp"># 显示指定文件是什么人在什么时间修改过</span>
<span class="n">git</span> <span class="n">blame</span> <span class="p">[</span><span class="n">file</span><span class="p">]</span>

<span class="cp"># 显示暂存区和工作区的差异</span>
<span class="n">git</span> <span class="n">diff</span>

<span class="cp"># 显示暂存区和上一个commit的差异</span>
<span class="n">git</span> <span class="n">diff</span> <span class="o">--</span><span class="n">cached</span> <span class="p">[</span><span class="n">file</span><span class="p">]</span>

<span class="cp"># 显示工作区与当前分支最新commit之间的差异</span>
<span class="n">git</span> <span class="n">diff</span> <span class="n">HEAD</span>

<span class="cp"># 显示两次提交之间的差异</span>
<span class="n">git</span> <span class="n">diff</span> <span class="p">[</span><span class="n">first</span><span class="o">-</span><span class="n">branch</span><span class="p">]...[</span><span class="n">second</span><span class="o">-</span><span class="n">branch</span><span class="p">]</span>

<span class="cp"># 显示今天你写了多少行代码</span>
<span class="n">git</span> <span class="n">diff</span> <span class="o">--</span><span class="n">shortstat</span> <span class="s">&quot;@{0 day ago}&quot;</span>

<span class="cp"># 显示某次提交的元数据和内容变化</span>
<span class="n">git</span> <span class="n">show</span> <span class="p">[</span><span class="n">commit</span><span class="p">]</span>

<span class="cp"># 显示某次提交发生变化的文件</span>
<span class="n">git</span> <span class="n">show</span> <span class="o">--</span><span class="n">name</span><span class="o">-</span><span class="n">only</span> <span class="p">[</span><span class="n">commit</span><span class="p">]</span>

<span class="cp"># 显示某次提交时，某个文件的内容</span>
<span class="n">git</span> <span class="n">show</span> <span class="p">[</span><span class="n">commit</span><span class="p">]</span><span class="o">:</span><span class="p">[</span><span class="n">filename</span><span class="p">]</span>

<span class="cp"># 显示当前分支的最近几次提交</span>
<span class="n">git</span> <span class="n">reflog</span>
</pre></div>


<h3 id="log">log管理</h3>
<h4 id="1-log">1. 清空 log</h4>
<div class="hlcode"><pre><span class="err">#</span> <span class="nx">创建新的分支</span>
<span class="nx">git</span> <span class="nx">checkout</span> <span class="o">--</span><span class="nx">orphan</span>  <span class="nx">new_branch</span>

<span class="err">#</span><span class="nx">添加所有文件变化至暂存空间</span>
<span class="nx">git</span> <span class="nb">add</span> <span class="na">-A</span>

<span class="err">#</span><span class="nx">提交并添加提交记录</span>
<span class="nx">git</span> <span class="nx">commit</span> <span class="na">-am</span> <span class="s2">&quot;commit message&quot;</span>
<span class="err">#</span><span class="nx">删除master分支</span>
<span class="nx">git</span> <span class="nx">branch</span> <span class="na">-D</span> <span class="o">&lt;</span><span class="nx">master</span><span class="na">-name</span><span class="o">&gt;</span>

<span class="err">#</span><span class="nx">重新命名当前独立分支为</span> <span class="nx">master</span>
<span class="nx">git</span> <span class="nx">branch</span> <span class="na">-m</span> <span class="o">&lt;</span><span class="nx">master</span><span class="o">&gt;</span>

<span class="err">#</span><span class="nx">推送到远端分支</span>
<span class="nx">git</span> <span class="nb">push</span> <span class="na">-f</span> <span class="nx">origin</span> <span class="o">&lt;</span><span class="nx">master</span><span class="o">&gt;</span>
</pre></div>


<h3 id="log_1">优雅的查看log</h3>
<p>参考：https://stackoverflow.com/questions/1057564/pretty-git-branch-graphs</p>
<div class="hlcode"><pre><span class="n">git</span> <span class="n">log</span> <span class="o">--</span><span class="n">all</span> <span class="o">--</span><span class="n">decorate</span> <span class="o">--</span><span class="n">oneline</span> <span class="o">--</span><span class="n">graph</span>
</pre></div>


<p>可以在git config里面设置 别名 alias</p>
<div class="hlcode"><pre><span class="n">git</span> <span class="n">config</span> <span class="o">--</span><span class="n">global</span> <span class="n">alias</span><span class="p">.</span><span class="n">adog</span> <span class="s">&quot;log --all --decorate --oneline --graph&quot;</span>
<span class="n">git</span> <span class="n">adog</span> 
</pre></div>


<h2 id="_14">远程同步</h2>
<div class="hlcode"><pre><span class="cp"># 下载远程仓库的所有变动</span>
<span class="n">git</span> <span class="n">fetch</span> <span class="p">[</span><span class="n">remote</span> <span class="n">shortname</span><span class="p">]</span>

<span class="cp"># 显示所有远程仓库</span>
<span class="n">git</span> <span class="n">remote</span> <span class="o">-</span><span class="n">v</span>

<span class="cp"># 显示某个远程仓库的信息</span>
<span class="n">git</span> <span class="n">remote</span> <span class="n">show</span> <span class="p">[</span><span class="n">remote</span> <span class="n">shortname</span><span class="p">]</span>

<span class="cp"># 增加一个新的远程仓库，并命名</span>
<span class="n">git</span> <span class="n">remote</span> <span class="n">add</span> <span class="p">[</span><span class="n">remote</span> <span class="n">shortname</span><span class="p">]</span> <span class="p">[</span><span class="n">url</span><span class="p">]</span>

<span class="cp"># 取回远程仓库的变化，并与本地分支合并</span>
<span class="cp"># pull=fetch+merge </span>
<span class="n">git</span> <span class="n">pull</span> <span class="p">[</span><span class="n">remote</span> <span class="n">shortname</span><span class="p">]</span> <span class="p">[</span><span class="n">branch</span><span class="o">-</span><span class="n">name</span><span class="p">]</span>

<span class="cp"># 上传本地指定分支到远程仓库</span>
<span class="n">git</span> <span class="n">push</span> <span class="p">[</span><span class="n">remote</span> <span class="n">shortname</span><span class="p">]</span> <span class="p">[</span><span class="n">branch</span><span class="o">-</span><span class="n">name</span><span class="p">]</span>

<span class="cp"># 强行推送当前分支到远程仓库，即使有冲突</span>
<span class="n">git</span> <span class="n">push</span> <span class="p">[</span><span class="n">remote</span> <span class="n">shortname</span><span class="p">]</span> <span class="o">--</span><span class="n">force</span>

<span class="cp"># 推送所有分支到远程仓库</span>
<span class="n">git</span> <span class="n">push</span> <span class="p">[</span><span class="n">remote</span> <span class="n">shortname</span><span class="p">]</span> <span class="o">--</span><span class="n">all</span>

<span class="n">das</span><span class="o">?</span>
</pre></div>


<h2 id="_15">版本退回</h2>
<div class="hlcode"><pre><span class="cp">#HEAD指向的版本就是当前版本，因此，Git允许我们在版本的历史之间穿梭，使用命令</span>
<span class="n">git</span> <span class="n">reset</span> <span class="o">--</span><span class="n">hard</span> <span class="n">commit_id</span>
<span class="cp">#穿梭前，用git log可以查看提交历史，以便确定要回退到哪个版本。</span>
<span class="n">git</span> <span class="n">log</span>

<span class="cp"># 要重返未来，用git reflog查看命令历史，以便确定要回到未来的哪个版本。</span>
<span class="n">git</span> <span class="n">reflog</span>

<span class="cp"># 恢复暂存区的指定文件到工作区</span>
<span class="n">git</span> <span class="n">checkout</span> <span class="p">[</span><span class="n">file</span><span class="p">]</span>

<span class="cp"># 恢复某个commit的指定文件到暂存区和工作区</span>
<span class="n">git</span> <span class="n">checkout</span> <span class="p">[</span><span class="n">commit</span><span class="p">]</span> <span class="p">[</span><span class="n">file</span><span class="p">]</span>

<span class="cp"># 恢复暂存区的所有文件到工作区</span>
<span class="n">git</span> <span class="n">checkout</span> <span class="p">.</span>

<span class="cp"># 重置暂存区的指定文件，与上一次commit保持一致，但工作区不变</span>
<span class="n">git</span> <span class="n">reset</span> <span class="p">[</span><span class="n">file</span><span class="p">]</span>

<span class="cp"># 重置暂存区与工作区，与上一次commit保持一致</span>
<span class="n">git</span> <span class="n">reset</span> <span class="o">--</span><span class="n">hard</span>

<span class="cp"># 重置当前分支的指针为指定commit，同时重置暂存区，但工作区不变</span>
<span class="n">git</span> <span class="n">reset</span> <span class="p">[</span><span class="n">commit</span><span class="p">]</span>

<span class="cp"># 重置当前分支的HEAD为指定commit，同时重置暂存区和工作区，与指定commit一致</span>
<span class="n">git</span> <span class="n">reset</span> <span class="o">--</span><span class="n">hard</span> <span class="p">[</span><span class="n">commit</span><span class="p">]</span>

<span class="cp"># 重置当前HEAD为指定commit，但保持暂存区和工作区不变</span>
<span class="n">git</span> <span class="n">reset</span> <span class="o">--</span><span class="n">keep</span> <span class="p">[</span><span class="n">commit</span><span class="p">]</span>

<span class="cp"># 新建一个commit，用来撤销指定commit</span>
<span class="cp"># 后者的所有变化都将被前者抵消，并且应用到当前分支</span>
<span class="n">git</span> <span class="n">revert</span> <span class="p">[</span><span class="n">commit</span><span class="p">]</span>

<span class="cp"># 暂时将未提交的变化移除，稍后再移入</span>
<span class="n">git</span> <span class="n">stash</span>
<span class="n">git</span> <span class="n">stash</span> <span class="n">pop</span>
</pre></div>


<h1 id="git_1">git 开发模式</h1>
<h2 id="github-flow">GitHub Flow——以部署为中心的开发模式</h2>
<p>❶ 令 master 分支时常保持可以部署的状态<br />
❷  进行新的作业时要从master分支创建新分支，新分支名称要具有 描述性<br />
❸ 在❷新建的本地仓库分支中进行提交<br />
❹ 在 GitHub 端仓库创建同名分支，定期 push<br />
❺ 需要帮助或反馈时创建 Pull Request，以Pull Request进行交流 <br />
❻ 让其他开发者进行审查，确认作业完成后与 master 分支合并 <br />
❼ 与 master 分支合并后立刻部署</p>
<h2 id="git-flow">Git Flow——以开发为中心的开发模式</h2>
<p><img src="https://img-blog.csdn.net/20180624174835949?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1NodVNoZW5nMDAwNw==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" width="50%"></p>
<p>❶  从开发版的分支（develop）创建工作分支（feature branches），进 行功能的实现或修正<br />
❷  工作分支（feature branches）的修改结束后，与开发版的分支 （develop）进行合并<br />
❸ 重复上述❶和❷，不断实现功能直至可以发布 <br />
❹ 创建用于发布的分支（release branches），处理发布的各项工作<br />
❺ 发布工作完成后与 master 分支合并，打上版本标签（Tag）进行发布 <br />
❻  如果发布的软件出现BUG，以打了标签的版本为基础进行修正 （hotfixes）</p>
<h3 id="_16">专栏：版本号的分配规则</h3>
<p>版本控制策略规定了软件版本号的分配规则，因此制定该策 略时应当尽量简单易懂。 比如在用 x.y.z 格式进行版本管理时的规则如下所示。</p>
<ol>
<li>x 在重大功能变更或新版本不向下兼容时加 1，此时 y 与 z 的数字归 0 </li>
<li>y在添加新功能或者删除已有功能时加1，此时z的数字归0 </li>
<li>z 只在进行内部修改后加 1<br />
下面举个具体例子：</li>
</ol>
<p>1.0.0：最初发布的版本 …<br />
1.0.1：修正了轻微 BUG …<br />
1.0.2：修复漏洞 …● <br />
1.1.0：添加新功能 …<br />
2.0.0：更新整体 UI 并添加新功能</p>
<p>这便是版本号的大致分配规则。 如果团队采用了 Git…Flow，那么成员在交流的时候会经常用 到版本号，因此版本控制策略越早制定越好</p>
</div>

        </div>
        <div id="footer">
            <span>
                Copyright © 2019 zhang787jun.
                Powered by <a href="http://simiki.org/" target="_blank">Simiki</a>.
            </span>
        </div>
        
    </body>
</html>